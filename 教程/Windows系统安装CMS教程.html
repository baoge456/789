<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows系统安装爱影CMS完整教程</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", Arial, sans-serif;
        }
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-size: 28px;
        }
        h2 {
            color: #2c3e50;
            background-color: #e3f2fd;
            padding: 10px 15px;
            border-left: 5px solid #3498db;
            margin: 30px 0 20px;
            font-size: 22px;
        }
        h3 {
            color: #34495e;
            margin: 25px 0 15px;
            font-size: 18px;
            padding-left: 10px;
            border-left: 3px solid #2ecc71;
        }
        p {
            margin: 10px 0;
            font-size: 16px;
        }
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dashed #3498db;
        }
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 15px 0;
            font-size: 15px;
            color: #856404;
        }
        .warning {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 10px 15px;
            margin: 15px 0;
            font-size: 15px;
            color: #721c24;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        table th {
            background-color: #f2f2f2;
            font-weight: bold;
            color: #333;
        }
        pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: "Consolas", "Monaco", monospace;
            font-size: 14px;
        }
        .dir-tree {
            background-color: #f8f9fa;
            border-left: 3px solid #3498db;
            padding: 10px 20px;
            margin: 10px 0;
            font-size: 15px;
        }
        .step {
            margin: 20px 0;
            padding-left: 15px;
            border-left: 2px solid #3498db;
        }
    </style>
</head>
<body>
    <h1>Windows系统安装爱影CMS完整教程</h1>
    <p>本教程基于官方文档（<a href="https://www.iycms.com/documents/windows.html" target="_blank">https://www.iycms.com/documents/windows.html</a>）编写，详细介绍在Windows系统中安装爱影CMS的全流程，涵盖前期准备、数据库配置、程序部署等关键环节，确保新手也能顺利完成安装。</p>

    <!-- 第一部分：关闭防火墙 -->
    <h2>第一部分：关闭系统防火墙</h2>
    <p>Windows防火墙可能拦截CMS程序的数据库连接、后台访问等通信请求，导致安装或使用异常，需先关闭防火墙。</p>
    <p>具体关闭方法参考官方指引：<a href="https://bbs.iycms.com/#/plate/detail?id=9" target="_blank">https://bbs.iycms.com/#/plate/detail?id=9</a></p>


    <!-- 第二部分：安装数据库（可选） -->
    <h2>第二部分：安装数据库（可选，程序可自动安装）</h2>
    <p>爱影CMS支持两种数据库：<strong>PostgreSQL</strong>（官方推荐）和<strong>MySQL</strong>。若提前手动安装，可减少后续程序自动安装的等待时间；若未安装，CMS程序会在后续步骤中自动下载并部署。</p>

    <h3>1. 数据库下载地址</h3>
    <ul class="step">
        <li>PostgreSQL：<a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank">https://www.enterprisedb.com/downloads/postgres-postgresql-downloads</a></li>
        <li>MySQL：<a href="https://dev.mysql.com/downloads/installer/" target="_blank">https://dev.mysql.com/downloads/installer/</a></li>
    </ul>

    <h3>2. 安装注意事项</h3>
    <div class="note">
        <strong>重要提醒</strong>：安装过程中需手动设置<strong>数据保存路径</strong>，建议选择非系统盘（如D:\Database），避免系统盘空间不足或重装系统导致数据丢失。
    </div>
    <p>下载后双击安装包，按默认向导步骤安装即可，无需额外复杂配置。


    <!-- 第三部分：安装CMS程序（核心步骤） -->
    <h2>第三部分：安装CMS程序（核心步骤）</h2>

    <h3>1. 下载CMS程序</h3>
    <div class="step">
        <p>1. 访问爱影CMS官方下载中心：<a href="https://iycms.com/download" target="_blank">https://iycms.com/download</a></p>
        <p>2. 在下载页面中，确认选择<strong>Windows</strong>服务器类型（支持Windows Server全系列版本）</p>
        <p>3. 点击“立即下载”，获取最新版本安装包（当前最新版本：v2.1.16，更新时间2023-08-11）</p>
        <p>提示：页面同时提供“双引擎模板”“丰富系统标签”等附加资源，可根据需求选择下载。</p>
    </div>

    <h3>2. 解压安装包</h3>
    <div class="warning">
        <strong>严禁操作</strong>：解压路径<strong>不能包含中文</strong>（示例：正确路径C:\iycms，错误路径C:\爱影CMS），否则程序会启动失败。
    </div>
    <p>解压后目录结构及文件说明如下：</p>
    <div class="dir-tree">
        -- html ：页面文件（前端页面、模板文件等）<br>
        -- lib ：数据库工具、系统守护进程等核心依赖<br>
        -- cms.exe ：CMS系统主执行程序（启动核心）<br>
        -- upgrade.exe ：CMS系统升级程序（后续更新使用）<br>
        -- 帮助文档.pdf ：详细使用指南与问题排查方案
    </div>
    <div class="note">
        <strong>重要提醒</strong>：不得删除解压后的初始目录或文件，删除会导致程序功能异常、无法启动。
    </div>

    <h3>3. 运行CMS程序</h3>
    <div class="warning">
        <strong>必须操作</strong>：<strong>右键点击cms.exe → 选择“以管理员身份运行”</strong>，若直接双击运行，会因权限不足导致启动失败或数据库连接错误。
    </div>
    <div class="step">
        <p>1. 找到解压目录中的“cms.exe”文件，右键选择“以管理员身份运行”</p>
        <p>2. 程序启动后，后台会执行环境初始化（首次运行耗时约1-3分钟），可通过日志查看进度：</p>
        <p>   - 成功启动会显示日志：<br>
            <code>2023/08/16 10:30:18 启动管理后台:0.0.0.0:21007<br>
            2023/08/16 10:30:19 系统启动成功...</code>
        </p>
        <p>   （注：21007为默认管理后台端口，不可随意修改）</p>
    </div>

    <h3>4. 进入CMS安装界面</h3>
    <div class="step">
        <p>1. 打开浏览器（推荐Chrome、Edge），在地址栏输入：<br>
            <code>http://你的服务器IP:21007</code><br>
            （示例：若服务器IP为192.168.1.100，输入http://192.168.1.100:21007）
        </p>
        <p>2. 进入“爱影CMS一键自动化安装界面”，点击“开始安装”，进入数据库配置环节。</p>
    </div>

    <h3>5. 配置数据库（本地/远程二选一）</h3>
    <p>根据部署需求选择“本地数据库”（单机部署推荐）或“远程数据库”（多服务器部署使用），以下为详细配置步骤。</p>

    <h4>5.1 使用本地数据库（推荐）</h4>
    <div class="step">
        <p>1. 在安装界面选择“使用本地”（系统优先使用已安装的本地数据库，未安装则自动下载安装）</p>
        <p>2. 选择数据库类型（PostgreSQL/MySQL），按以下规则填写配置信息：</p>
    </div>
    <table>
        <thead>
            <tr>
                <th>数据库类型</th>
                <th>默认地址</th>
                <th>默认端口</th>
                <th>超管账号</th>
                <th>注意事项</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>PostgreSQL</td>
                <td>localhost 或 127.0.0.1</td>
                <td>5432</td>
                <td>postgres</td>
                <td>已安装则用现有超管账号，未安装默认使用postgres</td>
            </tr>
            <tr>
                <td>MySQL</td>
                <td>localhost 或 127.0.0.1</td>
                <td>3306</td>
                <td>root</td>
                <td>已安装则用现有超管账号，未安装默认使用root</td>
            </tr>
        </tbody>
    </table>
    <div class="step">
        <p>3. 填写数据库名称（建议填写“cms”，便于识别），输入数据库密码（未安装则设置新密码）</p>
        <p>4. 点击“开始安装数据库”，系统自动完成下载（若未安装）、解压、初始化，等待进度条完成即可。</p>
    </div>

    <h4>5.2 使用远程数据库（多服务器部署）</h4>
    <div class="step">
        <p>1. 在安装界面选择“使用远程”，然后选择数据库类型（PostgreSQL/MySQL）</p>
        <p>2. 按以下要求填写远程数据库信息：</p>
    </div>

    <p><strong>PostgreSQL远程配置注意事项</strong>：</p>
    <ul class="step">
        <li>必须使用远程数据库的<strong>超管账号</strong>（如postgres）及密码</li>
        <li>数据库名称：若远程已存在该名称数据库则直接连接，不存在则自动创建</li>
    </ul>

    <p><strong>MySQL远程配置注意事项</strong>：</p>
    <ul class="step">
        <li>必须使用远程数据库的<strong>超管账号</strong>（如root）及密码</li>
        <li>若出现“无法连接远程MySQL”，需在远程MySQL服务器执行以下命令授权（解决IP限制）：</li>
    </ul>
    <pre>
# 1. 登录远程MySQL服务器（替换“超管账号”“超管密码”为实际信息）
mysql -u 超管账号 -p超管密码  
# 示例：mysql -u root -p123456

# 2. 切换到mysql系统数据库
use mysql;

# 3. 允许所有IP访问该超管账号（替换“超管账号”为实际账号，如root）
update user set host = '%' where user = '超管账号';  
# 注：执行后可能提示警告，无需处理

# 4. 刷新权限，使配置生效
FLUSH PRIVILEGES;
    </pre>
    <div class="step">
        <p>3. 填写完成后点击“重新测试”，显示“连接成功”后，点击“下一步”进入后续安装。</p>
    </div>

    <h3>6. 完成安装并登录后台</h3>
    <div class="step">
        <p>1. 数据库配置完成后，系统自动执行CMS数据初始化（创建数据表、导入初始配置）</p>
        <p>2. 安装完成后，进入“CMS管理后台登录界面”，使用<strong>初始账号密码</strong>登录：</p>
        <ul>
            <li>初始化账号：<strong>admin</strong></li>
            <li>初始化密码：<strong>123456</strong></li>
        </ul>
        <p>3. 输入页面自动生成的验证码（如6432），点击“登录”，即可进入CMS管理后台，至此安装全部完成。</p>
    </div>

    <!-- 后续建议 -->
    <h2>后续建议</h2>
    <ul class="step">
        <li>首次登录后，<strong>立即修改初始密码</strong>（路径：后台“系统设置 → 账号管理”），避免账号泄露</li>
        <li>如需更换模板，可在官方“模板商城”下载后，通过“html”目录替换或后台上传（参考《帮助文档.pdf》）</li>
        <li>后续更新CMS系统时，直接运行解压目录中的“upgrade.exe”（需管理员权限），按提示完成升级</li>
    </ul>
</body>
</html>